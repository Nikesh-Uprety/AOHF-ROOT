Implement Gmail-Based Email Verification with Redirect and Login Restriction
âœ… Task Objective:
Implement an email verification system for new users after registration. The system should:

Send a verification link to the userâ€™s registered Gmail address.

Block login for users who have not verified their email.

Redirect users after registration to a status page showing a message to check their inbox.

Use Gmail SMTP via the credentials provided.

âš™ï¸ Pre-Setup Completed (by User):
The Gmail API and App Password setup has already been done âœ…
Please make use of the following setup:

âœ… Google Gmail API Configuration:
Google Cloud Console:

Project created or selected

Gmail API enabled

Credentials (OAuth 2.0 or Service Account) created

App Password Generated from Gmail security settings.

ğŸ” Use the Following Environment Variables:
Add these to the .env file for sending email:

env
Copy
Edit
GMAIL_USER="aohf404@gmail.com"
GMAIL_APP_PASSWORD="dkjp rgtn krww gojr"
Use these credentials in your mailing service logic (e.g., with nodemailer).

ğŸ”§ Functional Requirements to Implement
1. ğŸ“§ Email Verification Logic
When a user registers, immediately send a verification email with:

A secure link containing a verification token (/verify-email/:token)

On visiting that link:

Update user in DB â†’ isVerified: true

2. â›” Block Unverified Users from Logging In
During login:

If userâ€™s email is not verified â†’ reject login with:

pgsql
Copy
Edit
Please verify your email in order to login.
3. ğŸ” Redirect After Registration
After successful registration:

Redirect the user to a /verify-email page

Show message:

pgsql
Copy
Edit
Please check your Gmail to get the verification link.
ğŸ” Review & Build API Logic
Check if the following already exist in your project:

Email sending logic (SMTP or Gmail API).

isVerified field in the User schema (MongoDB/SQL).

/verify-email/:token route that marks user as verified.

JWT or token system for creating secure email links.

ğŸ”¨ If any are missing:
Implement the email-sending logic using nodemailer.

Generate and store secure tokens (JWT or UUID).

Add verification middleware.

Update the database model to support isVerified.

Build a verification success/failure page.

âœ… Expected Deliverables:
ğŸ”’ Secure email verification link system.

ğŸ“¨ Email sent on registration via Gmail SMTP.

ğŸ›‘ Block login for unverified users with appropriate error.

ğŸ” Post-registration redirect with inbox check message.

ğŸ§ª Review or build all necessary backend logic as needed.

